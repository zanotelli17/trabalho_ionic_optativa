<ion-header no-border>  
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Te√≥ Ofertas
    </ion-title>
    <!-- <ion-searchbar 
      *ngIf="isSearchbar" 
      placeholder="Buscar Produto / Supermercado" 
      animated
      (ionChange)="buscarProduto($event)"
      showCancelButton="focus"
      (ionCancel)="isSearchbar=false"
      >
    </ion-searchbar> -->
    <ion-buttons  slot="secondary" >
      <ion-button  *ngIf="!isSearchbar" (click)="isSearchbar=true">
        <ion-icon slot="icon-only" name="search" ></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons  slot="secondary" >
        <ion-button  *ngIf="isSearchbar" (click)="isSearchbar=false">
          <ion-icon slot="icon-only" name="ios-arrow-up" ></ion-icon>
        </ion-button>
      </ion-buttons>
  </ion-toolbar>
  <ion-toolbar *ngIf="isSearchbar" color="dark"> 
    <ion-searchbar  
      placeholder="Buscar Produto / Supermercado" 
      animated
      (ionChange)="buscarProduto($event)"
      showCancelButton="focus"
      (ionCancel)="isSearchbar=false"
      value="{{terxtoBuscar}}"
      >
    </ion-searchbar>
</ion-toolbar>
</ion-header>

<ion-content  ion-padding>
   
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content
        pullingIcon="arrow-dropdown"
        pullingText="Pull to refresh"
        refreshingSpinner="crescent"
      >
      </ion-refresher-content>
    </ion-refresher>
    
  <!-- <ion-item>
    <ion-title class="dia-atual" >
      Ofertas do dia ({{ data| date:'dd/MM/yyyy'}})
    </ion-title>
  </ion-item> -->
 
    <ion-list *ngIf="produtos.length === 0">
      <ion-item *ngFor=" let i of [1,1,1,1,1,1,1,1]">
          <ion-label>
              <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
              <ion-skeleton-text animated style="width: 90%"></ion-skeleton-text>
              <ion-skeleton-text animated style="width: 90%"></ion-skeleton-text>
          </ion-label>
      </ion-item>
      
        
    </ion-list>
    <ion-list *ngIf="produtos.length > 0">
      <ion-card class="welcome-card" *ngFor="let produto of produtos | filtro:terxtoBuscar">
        <img class="img-produto" src="{{produto.imagem_oferta}}" />
        <ion-card-header>
          <ion-card-subtitle>{{produto.descricao_oferta}}</ion-card-subtitle>
          <ion-card-title class="preco">
            R$ {{produto.valor_oferta}} 
          </ion-card-title>
          <span class="nome-supermercado">{{produto.empresa_id.nome_fantasia}}</span>
          <img class="img-supermecardo" src="{{produto.empresa_id.imagem}}" />
        </ion-card-header>
      </ion-card>
  </ion-list>
  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
